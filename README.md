# FindShroom - Приложение для распознавания грибов

Android приложение для распознавания грибов с помощью AI (Gemini), картой с метками и справочником грибов.

## Функциональность

- **Распознавание грибов**: Использование Gemini AI для распознавания грибов по фотографиям
- **Карта с метками**: Добавление меток на карте с фотографиями найденных грибов
- **Справочник грибов**: Полный справочник с возможностью поиска, добавления, редактирования и удаления записей

## Технологии

- **Jetpack Compose** - декларативный UI
- **MVVM архитектура** - разделение ответственности
- **Room Database** - локальное хранение данных
- **Hilt** - dependency injection
- **Navigation Compose** - навигация между экранами
- **StateFlow** - реактивное обновление UI
- **Maps SDK for Android** - карта с метками (используется Maps SDK для Android, не REST API)
- **Gemini AI** - распознавание грибов

## Настройка проекта

### 1. Gemini AI API Key

API ключ для Gemini уже настроен в коде (`GeminiRepository.kt`):
```kotlin
private val apiKey = "AIzaSyBK5s27BPFs44j2xR-s-qejFHgsgc4QItI"
```

**Примечание**: Распознавание грибов работает сразу, дополнительная настройка не требуется.

### 2. Maps SDK for Android API Key (опционально)

Для работы карты необходимо получить API ключ для **Maps SDK for Android** (опционально):

1. Перейдите в [Google Cloud Console](https://console.cloud.google.com/)
2. Создайте новый проект или выберите существующий
3. В разделе "APIs & Services" → "Library" найдите и включите **"Maps SDK for Android"**
4. Перейдите в "APIs & Services" → "Credentials" и создайте API ключ
5. Ограничьте ключ для использования только с "Maps SDK for Android" (рекомендуется)

Добавьте ваш API ключ в файл `local.properties` (в корне проекта):

```properties
MAPS_API_KEY=ваш_ключ_maps_sdk_for_android
```

**Важно**: 
- Без этого ключа карта не будет работать, но приложение соберется и запустится
- Функции распознавания и справочника работают без Maps API ключа
- Используется именно **Maps SDK for Android**, а не REST API или другие сервисы Google Maps

## Разрешения

Приложение запрашивает следующие разрешения:
- Камера (для фотографирования грибов)
- Местоположение (для карты)
- Хранилище (для сохранения фотографий)

## Структура проекта

```
app/src/main/java/com/example/findshroom/
├── data/
│   ├── dao/              # Room DAO интерфейсы
│   ├── database/         # Room Database
│   ├── model/            # Модели данных (Mushroom, MapMarker)
│   └── repository/       # Репозитории
├── di/                   # Hilt модули
├── ui/
│   ├── navigation/       # Навигация
│   ├── screen/           # Экраны приложения
│   │   ├── guide/        # Справочник грибов
│   │   ├── map/          # Карта с метками
│   │   └── recognition/  # Распознавание грибов
│   ├── theme/           # Тема приложения
│   └── viewmodel/       # ViewModels
└── FindShroomApplication.kt
```

## Основные компоненты

### Data Layer
- **Mushroom** - модель данных гриба
- **MapMarker** - модель метки на карте
- **MushroomDao / MapMarkerDao** - DAO для работы с БД
- **FindShroomDatabase** - Room Database

### Repository Layer
- **MushroomRepository** - работа с грибами
- **MapMarkerRepository** - работа с метками
- **GeminiRepository** - интеграция с Gemini AI

### ViewModel Layer
- **RecognitionViewModel** - логика распознавания
- **MapViewModel** - логика карты
- **GuideViewModel** - логика справочника

### UI Layer
- **RecognitionScreen** - экран распознавания
- **MapScreen** - экран карты
- **GuideScreen** - экран справочника
- **NavGraph** - навигация

## Использование

1. **Распознавание грибов**:
   - Откройте вкладку "Распознавание"
   - Сделайте фото или выберите из галереи
   - Дождитесь результата распознавания
   - Сохраните в справочник при необходимости

2. **Карта**:
   - Откройте вкладку "Карта"
   - Долгим нажатием добавьте метку
   - Выберите фото и добавьте заметку
   - Просматривайте и редактируйте существующие метки

3. **Справочник**:
   - Откройте вкладку "Справочник"
   - Используйте поиск для фильтрации
   - Нажмите на гриб для просмотра деталей
   - Редактируйте или удаляйте записи

## Сборка проекта

```bash
./gradlew build
```

## Запуск

Запустите приложение на эмуляторе или реальном устройстве через Android Studio.

## Примечания

- Приложение требует интернет-соединение для работы с Gemini AI и Google Maps
- Все данные хранятся локально в Room Database
- Приложение устойчиво к изменениям конфигурации (поворот экрана и т.д.)

